<div class="register-card">
  <div class="user-avatar">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
      <circle cx="8.5" cy="7" r="4"></circle>
      <line x1="20" y1="8" x2="20" y2="14"></line>
      <line x1="23" y1="11" x2="17" y2="11"></line>
    </svg>
  </div>

  <div class="register-header">
    <h1>Créer un compte</h1>
    <p>Rejoignez StockControl gratuitement</p>
  </div>

  <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
    <div *ngIf="error" class="alert-error">{{ error }}</div>

    <!-- Username -->
    <div class="input-group">
      <div class="input-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
      </div>
      <input 
        type="text" 
        formControlName="nomUtilisateur"
        placeholder="Nom d'utilisateur" 
        [class.is-invalid]="registerForm.get('nomUtilisateur')?.invalid && registerForm.get('nomUtilisateur')?.touched"
      >
    </div>
    <div 
      *ngIf="registerForm.get('nomUtilisateur')?.invalid && registerForm.get('nomUtilisateur')?.touched"
      class="error-message"
    >
      Nom d'utilisateur requis
    </div>

    <!-- Email -->
    <div class="input-group">
      <div class="input-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
          <polyline points="22,6 12,13 2,6"></polyline>
        </svg>
      </div>
      <input 
        type="email" 
        formControlName="email"
        placeholder="Email" 
        [class.is-invalid]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"
      >
    </div>
    <div 
      *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"
      class="error-message"
    >
      <span *ngIf="registerForm.get('email')?.errors?.['required']">Email requis</span>
      <span *ngIf="registerForm.get('email')?.errors?.['email']">Email invalide</span>
    </div>

    <!-- Password -->
    <div class="input-group">
      <div class="input-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
          <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
        </svg>
      </div>
      <input 
        type="password" 
        formControlName="password"
        placeholder="Mot de passe"
        [class.is-invalid]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched"
      >
    </div>
    <div 
      *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched"
      class="error-message"
    >
      <span *ngIf="registerForm.get('password')?.errors?.['required']">Mot de passe requis</span>
      <span *ngIf="registerForm.get('password')?.errors?.['minlength']">Minimum 6 caractères</span>
    </div>
    <p class="password-hint">Minimum 6 caractères requis</p>

    <button 
      type="submit" 
      class="register-button"
      [disabled]="registerForm.invalid || loading"
    >
      <span *ngIf="loading" class="spinner"></span>
      {{ loading ? 'CRÉATION EN COURS...' : "S'INSCRIRE" }}
    </button>

    <div class="login-link">
      <a routerLink="/auth/login">Déjà un compte ? Se connecter</a>
    </div>
  </form>
</div>